/* ====== Base ====== */
:root{--bg:#0b0f17;--bg2:#0d1321;--panel:rgba(17,23,35,.72);--panelSolid:#0f1628;
--text:#e9eef6;--muted:#9fb3c8;--grid:#20304d;--border:rgba(255,255,255,.08);
--acc1:#0a6cff;--acc2:#00d4ff}
:root[data-theme="light"]{--bg:#f6f8fb;--bg2:#fff;--panel:rgba(255,255,255,.86);--panelSolid:#fff;
--text:#0f172a;--muted:#4b5563;--grid:#e7edf5;--border:#e6e9ee}
*{box-sizing:border-box}html,body{margin:0;padding:0;font-family:Inter,system-ui,Arial,sans-serif;
background:radial-gradient(1200px 500px at 10% -10%, rgba(0,212,255,.10), transparent 60%),
linear-gradient(180deg,var(--bg),var(--bg2));color:var(--text)}
a{color:inherit;text-decoration:none}
.app{display:flex;min-height:100vh}
.sidebar{width:300px;background:var(--panel);border-right:1px solid var(--border);padding:18px 12px;position:sticky;top:0;height:100vh;backdrop-filter:blur(10px);overflow:auto}
.logo{display:flex;align-items:center;gap:10px;margin-bottom:14px}
.logo img{height:26px;filter:drop-shadow(0 2px 8px rgba(0,0,0,.25))}
.logo strong{font-weight:800;letter-spacing:.3px}
.tab{display:flex;align-items:center;gap:10px;padding:10px 12px;margin:6px 0;border-radius:12px;border:1px solid var(--border);cursor:pointer;font-weight:700;transition:background .15s ease, transform .05s ease}
.tab:hover{background:rgba(255,255,255,.06)}.tab:active{transform:scale(.995)}
.tab.active{background:linear-gradient(90deg,var(--acc1),var(--acc2));color:#001a24;border-color:transparent}
.sidebar .row{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
.filters{margin-top:12px;padding-top:12px;border-top:1px dashed var(--border)}
.f-title{font-size:12px;color:var(--muted);margin:8px 0 4px}
.btn,.btn-sm{display:inline-flex;align-items:center;gap:8px;border-radius:12px;border:1px solid var(--border);padding:10px 12px;font-weight:800;background:rgba(255,255,255,.04);cursor:pointer;transition:transform .05s ease, box-shadow .15s ease}
.btn:hover,.btn-sm:hover{box-shadow:0 10px 28px rgba(0,0,0,.25)} .btn:active,.btn-sm:active{transform:scale(.98)}
.btn-sm{padding:7px 10px;font-weight:700}
.btn.primary{background:linear-gradient(90deg,var(--acc1),var(--acc2));color:#001a24;border-color:transparent}
.header{display:flex;align-items:center;justify-content:space-between;padding:16px 20px;border-bottom:1px solid var(--border);position:sticky;top:0;background:var(--panel);backdrop-filter:blur(12px);z-index:5}
.main{flex:1;display:flex;flex-direction:column}
.content{padding:18px 20px}
.grid{display:grid;gap:18px}
.grid-2{grid-template-columns:1.2fr .8fr}
.grid-3{grid-template-columns:1fr 1fr 1fr}
@media (max-width:1200px){.grid-2,.grid-3{grid-template-columns:1fr}}
.card{background:var(--panel);border:1px solid var(--border);border-radius:16px;padding:16px;box-shadow:0 20px 60px rgba(0,0,0,.25);backdrop-filter:blur(8px)}
.card-head{display:flex;justify-content:space-between;align-items:center}
.card h3{margin:6px 0 10px;font-size:16px;color:var(--acc2);letter-spacing:.2px}
.select{background:rgba(255,255,255,.04);border:1px solid var(--border);color:var(--text);border-radius:10px;padding:8px 10px}
.plot svg{width:100%;height:300px}
.legend{display:flex;flex-wrap:wrap;gap:10px;margin:8px 0 6px}
.legend .item{display:flex;align-items:center;gap:8px;padding:6px 8px;border:1px solid var(--border);border-radius:10px;cursor:pointer}
.legend .swatch{width:12px;height:12px;border-radius:3px}
.legend .item.active{outline:2px solid var(--acc2)}
.timer{font-size:12px;color:var(--muted);margin-left:8px}
.mono{font-family:'IBM Plex Mono',ui-monospace,Menlo,Consolas,monospace}
.center{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:30px}
.gate{width:100%;max-width:520px;background:var(--panel);border:1px solid var(--border);border-radius:18px;padding:22px;text-align:center;box-shadow:0 20px 60px rgba(0,0,0,.25)}
.input{width:100%;padding:12px 14px;border-radius:12px;border:1px solid var(--border);background:rgba(255,255,255,.04);color:var(--text);margin:8px 0}
.dropdown{position:relative;display:inline-block}
.dropdown-menu{position:absolute;right:0;top:40px;background:var(--panelSolid);border:1px solid var(--border);border-radius:12px;min-width:160px;display:none;box-shadow:0 12px 32px rgba(0,0,0,.35);z-index:10}
.dropdown-menu a{display:block;padding:10px 12px;border-bottom:1px solid var(--border);cursor:pointer}
.dropdown-menu a:last-child{border-bottom:none}
.dropdown.open .dropdown-menu{display:block}
.badges{position:fixed;right:16px;bottom:14px;display:flex;gap:8px;z-index:30}
.badge{background:var(--panelSolid);border:1px solid var(--border);border-radius:999px;padding:6px 10px;font-weight:700;display:flex;align-items:center;gap:6px;box-shadow:0 10px 28px rgba(0,0,0,.25)}
.badge .dot{width:8px;height:8px;border-radius:999px;background:#22c55e;box-shadow:0 0 8px rgba(34,197,94,.8)}
.notes{position:fixed;right:16px;top:70px;width:360px;max-width:90vw;background:var(--panelSolid);border:1px solid var(--border);border-radius:12px;padding:12px;z-index:40;display:none;box-shadow:0 12px 32px rgba(0,0,0,.35)}
.notes h4{margin:0 0 8px;font-size:13px;color:var(--acc2)}
.notes ul{margin:0 0 4px 18px;padding:0;font-size:13px;color:var(--muted)}
.notes .small{font-size:11px;color:var(--muted)}

/* WOW-Pack Badges & Controls */
.badgeKPI{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:999px;border:1px solid var(--border);background:var(--panelSolid);font-weight:800;margin-left:8px}
.badgeKPI.ok{color:#10b981;border-color:rgba(16,185,129,.3)}
.badgeKPI.warn{color:#f59e0b;border-color:rgba(245,158,11,.3)}
.badgeKPI.risk{color:#ef4444;border-color:rgba(239,68,68,.3)}
.inlineCtrls{display:flex;align-items:center;gap:10px;flex-wrap:wrap;margin-top:8px}
.inlineCtrls .rng{width:140px}
.btn-ghost{background:rgba(255,255,255,.04);border:1px dashed var(--border);padding:6px 10px;border-radius:10px;font-weight:700;cursor:pointer}

/* Portfolio KPIs */
.asset-list label{display:block;margin:8px 0}
.kpi-row{display:flex;gap:12px;margin:8px 0}
.kpi{flex:1;background:var(--panelSolid);border:1px solid var(--border);border-radius:12px;padding:10px}
.kpi-h{font-size:12px;color:var(--muted)}
.kpi-v{font-size:20px;font-weight:800}

/* Correlation Matrix */
.matrix{display:grid;grid-template-columns:repeat(6,1fr);gap:2px}
.matrix .cell{padding:10px;text-align:center;border:1px solid var(--border)}
.matrix .h{font-weight:800;background:rgba(255,255,255,.04)}
.cell.pos{background:rgba(16,185,129,.12)}
.cell.neg{background:rgba(239,68,68,.12)}

/* Modal */
.modal{position:fixed;inset:0;background:rgba(0,0,0,.5);display:none;align-items:center;justify-content:center;z-index:60}
.modal-content{background:var(--panelSolid);border:1px solid var(--border);border-radius:12px;padding:18px;min-width:320px;max-width:90vw}

/* Print memo */
.print-only{display:none}
@media print{
  .no-print{display:none!important}
  body{background:#fff;color:#000}
  .print-only{display:block}
  .memo{padding:20px;font-family:Inter,Arial,sans-serif}
  .memo-header{display:flex;gap:12px;align-items:center;border-bottom:2px solid #000;padding-bottom:10px;margin-bottom:10px}
  .memo-header img{height:28px}
  .memo-title{font-weight:800;font-size:18px}
  .memo-sub{font-size:12px}
  .memo-kpis{display:flex;gap:10px;margin-top:8px}
  .memo-kpis .k{flex:1;border:1px solid #000;padding:8px}
}
/* Plot-Hintergrund dunkel */
.plot { background:#0A0D11; border:1px solid #1C2230; border-radius:12px; }

/* Farbpunkte in Legendenleisten unter den Cards */
.legend { margin:6px 0 4px; color:#E6ECF8; font-size:12px; }
.legend .lg { display:inline-block; width:10px; height:10px; border-radius:50%; margin:0 8px 0 16px; transform:translateY(1px); }
.legend .lg::before { content:''; }

/* KPI-Badges */
.badgeKPI { display:inline-block; padding:6px 10px; margin-left:8px;
  background:#0F1524; border:1px solid #24314B; color:#E6ECF8; border-radius:8px; font-size:12px; }
.badgeKPI.positive { border-color:#10B981; color:#10B981; }
.badgeKPI.negative { border-color:#EF4444; color:#EF4444; }

/* Dropdown/Buttons leicht an Brand angleichen */
.btn-ghost { border:1px solid #24314B; color:#E6ECF8; }
.btn-ghost:hover { border-color:#1436AE; color:#ffffff; }
.select, .input { background:#0F1524; color:#E6ECF8; border:1px solid #24314B; }
